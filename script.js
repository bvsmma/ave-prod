/* ========================================
   Translations
   ======================================== */
var translations = {
  ru: {
    'nav.products': 'Продукты',
    'nav.features': 'Преимущества',
    'nav.howItWorks': 'Подключение',
    'nav.contact': 'Контакты',
    'nav.getAccess': 'Получить доступ',
    'hero.badge': 'Премиум решения для Majestic RP',
    'hero.title': 'Discord-боты и скрипты для Majestic RP',
    'hero.description': 'Профессиональные решения для автоматизации игрового процесса: управление семьями, защита союзов, авто-регистрация МЦЛ. Проверенные инструменты с гарантией стабильной работы 24/7.',
    'hero.stats.bots': 'бота в работе',
    'hero.stats.families': 'семьи обслужено',
    'hero.viewProducts': 'Смотреть продукты',
    'hero.contactUs': 'Связаться с нами',
    'products.title': 'Наши продукты',
    'products.description': 'Выберите подходящее решение для автоматизации вашего Discord-сервера',
    'products.subscription.1month': 'Подписка на 1 месяц',
    'products.subscription.3months': 'Подписка на 3 месяца',
    'products.subscription.6months': 'Подписка на 6 месяцев',
    'products.subscription.12months': 'Годовая подписка',
    'products.popular': 'Популярный',
    'products.familyBot.description': 'Модульная экосистема для управления Discord-сервером семьи на Majestic RP. Автоматизирует заявки, повышения, отчеты за MCL и капты. Полная настройка под вашу иерархию.',
    'products.familyBot.features.0': 'Отчеты за MCL, капты и мероприятия',
    'products.familyBot.features.1': 'Модуль Академии и повышений',
    'products.familyBot.features.2': 'Голосовая активность с защитой от абуза',
    'products.familyBot.features.3': 'Магазин семьи с наградами',
    'products.familyBot.features.4': 'Полное логирование действий',
    'products.familyBot.features.5': 'Персональная настройка под ключ',
    'products.allianceBot.description': 'Система защиты союзного сервера на принципе Zero Trust. Автоматический контроль доступа, исключение скаутов и посторонних. Состав всегда соответствует реальности.',
    'products.allianceBot.features.0': 'Мгновенная проверка при входе',
    'products.allianceBot.features.1': 'Мониторинг смены ролей в реальном времени',
    'products.allianceBot.features.2': 'Whitelist для соло-игроков',
    'products.allianceBot.features.3': 'Индивидуальные допуски для семей',
    'products.allianceBot.features.4': 'Защита от ложных срабатываний',
    'products.allianceBot.features.5': 'Полная автоматизация модерации',
    'products.mclBot.description': 'Мгновенная регистрация на турнирах MCL. Бот отправляет заявку в первые миллисекунды после открытия канала. Всегда быстрее любого игрока, даже с идеальным пингом.',
    'products.mclBot.features.0': 'Мгновенная реакция на открытие канала',
    'products.mclBot.features.1': 'Проверка каждые 0.1-0.2 секунды',
    'products.mclBot.features.2': 'Многопоточность (несколько серверов)',
    'products.mclBot.features.3': 'Интеллектуальное упреждение',
    'products.mclBot.features.4': 'Настройка шаблона сообщения',
    'products.mclBot.features.5': 'Консольные логи в реальном времени',
    'features.title': 'Наши преимущества',
    'features.description': 'Почему клиенты выбирают ave production',
    'features.support.title': 'Поддержка',
    'features.support.description': 'Оперативная помощь и консультации по всем вопросам',
    'features.flexible.title': 'Гибкие подписки',
    'features.flexible.description': 'Выбирайте срок от месяца до года с выгодными скидками',
    'features.security.title': 'Безопасность',
    'features.security.description': 'Защита данных и стабильная работа без сбоев',
    'howItWorks.title': 'Как проходит подключение',
    'howItWorks.description': 'Три простых шага до рабочего бота',
    'howItWorks.step1.title': 'Заходите в Discord',
    'howItWorks.step1.description': 'Присоединяйтесь к нашему серверу и получайте доступ к каталогу',
    'howItWorks.step2.title': 'Создаете тикет в #buy-script',
    'howItWorks.step2.description': 'Указываете желаемый скрипт и автоматически попадаете в приватный диалог с поддержкой',
    'howItWorks.step3.title': 'Получаете бота и гарантию',
    'howItWorks.step3.description': 'Выдаем инструкцию, подключаем бота, проверяем логи и даем гарантию работоспособности',
    'contact.title': 'Получить доступ',
    'contact.subtitle': 'Присоединитесь к нашему сообществу и начните использовать боты прямо сейчас',
    'contact.joinDiscord': 'Присоединиться к Discord',
    'contact.writeTelegram': 'Написать в Telegram',
    'contact.workHours': 'Пн-Вс, без выходных',
    'contact.nightReleases': 'Ночные релизы — по запросу',
    'contact.discord.description': 'Основной канал связи и поддержки',
    'contact.telegram.description': 'Личные сообщения и консультации',
    'faq.title': 'Часто задаваемые вопросы',
    'faq.description': 'Ответы на популярные вопросы о наших продуктах',
    'faq.q1.question': 'Как быстро подключается бот после оплаты?',
    'faq.q1.answer': 'Подключение бота занимает от 5 до 30 минут после подтверждения оплаты. Мы настраиваем бота под ваш сервер, проверяем работоспособность и выдаем полную инструкцию по использованию.',
    'faq.q2.question': 'Что делать, если бот перестал работать?',
    'faq.q2.answer': 'Создайте тикет в Discord или напишите в Telegram. Мы оперативно диагностируем проблему и восстановим работу бота. Время простоя компенсируется дополнительными днями подписки.',
    'faq.q3.question': 'Можно ли перенести бота на другой сервер?',
    'faq.q3.answer': 'Да, перенос бота на другой Discord-сервер возможен в рамках активной подписки. Обратитесь в поддержку, и мы выполним миграцию без потери данных и настроек.',
    'faq.q4.question': 'Какие способы оплаты вы принимаете?',
    'faq.q4.answer': 'Мы принимаем криптовалюту (BTC, ETH, USDT), банковские карты через безопасные платежные системы. Детали оплаты обсуждаются в приватном тикете.',
    'faq.q5.question': 'Есть ли тестовый период?',
    'faq.q5.answer': 'Мы не предоставляем тестовый период, но даем полную гарантию возврата средств в течение 24 часов, если бот не соответствует заявленному функционалу.',
    'faq.q6.question': 'Обновляются ли боты автоматически?',
    'faq.q6.answer': 'Да, все обновления и исправления применяются автоматически без вашего участия. Вы всегда используете актуальную версию бота с новейшими функциями.',
    'footer.description': 'Профессиональные Discord-боты и скрипты для Majestic RP',
    'footer.rights': 'Все права защищены.',
    'modal.whatsIncluded': 'Что входит',
    'modal.howToGet': 'КАК ПОЛУЧИТЬ СКРИПТ',
    'modal.step1.title': 'Заходите в Discord',
    'modal.step1.description': 'Присоединяйтесь к нашему серверу и получайте доступ к каталогу скриптов',
    'modal.step2.title': 'Создаете тикет в #buy-script',
    'modal.step2.description': 'Указываете желаемый скрипт и автоматически попадаете в приватный диалог с поддержкой',
    'modal.step3.title': 'Получаете бота и гарантию',
    'modal.step3.description': 'Выдаем инструкцию, подключаем бота, проверяем логи и даем гарантию работоспособности',
    'modal.additionalContact': 'ДОПОЛНИТЕЛЬНАЯ СВЯЗЬ',
    'modal.close': 'Закрыть'
  },
  en: {
    'nav.products': 'Products',
    'nav.features': 'Features',
    'nav.howItWorks': 'How It Works',
    'nav.contact': 'Contact',
    'nav.getAccess': 'Get Access',
    'hero.badge': 'Premium Solutions for Majestic RP',
    'hero.title': 'Discord Bots and Scripts for Majestic RP',
    'hero.description': 'Professional solutions for game process automation: family management, alliance protection, auto MCL registration. Proven tools with guaranteed 24/7 stable operation.',
    'hero.stats.bots': 'bots active',
    'hero.stats.families': 'families served',
    'hero.viewProducts': 'View Products',
    'hero.contactUs': 'Contact Us',
    'products.title': 'Our Products',
    'products.description': 'Choose the right solution for your Discord server automation',
    'products.subscription.1month': '1 Month Subscription',
    'products.subscription.3months': '3 Month Subscription',
    'products.subscription.6months': '6 Month Subscription',
    'products.subscription.12months': 'Annual Subscription',
    'products.popular': 'Popular',
    'products.familyBot.description': 'Modular ecosystem for managing Discord family server on Majestic RP. Automates applications, promotions, MCL reports and captures. Fully customizable to your hierarchy.',
    'products.familyBot.features.0': 'MCL, capture and event reports',
    'products.familyBot.features.1': 'Academy and promotion module',
    'products.familyBot.features.2': 'Voice activity with anti-abuse protection',
    'products.familyBot.features.3': 'Family shop with rewards',
    'products.familyBot.features.4': 'Complete action logging',
    'products.familyBot.features.5': 'Turnkey personal setup',
    'products.allianceBot.description': 'Alliance server security system based on Zero Trust principle. Automatic access control, scout and outsider exclusion. Roster always matches reality.',
    'products.allianceBot.features.0': 'Instant verification on join',
    'products.allianceBot.features.1': 'Real-time role change monitoring',
    'products.allianceBot.features.2': 'Whitelist for solo players',
    'products.allianceBot.features.3': 'Individual family permissions',
    'products.allianceBot.features.4': 'False positive protection',
    'products.allianceBot.features.5': 'Full moderation automation',
    'products.mclBot.description': 'Instant MCL tournament registration. Bot sends application in the first milliseconds after channel opens. Always faster than any player, even with perfect ping.',
    'products.mclBot.features.0': 'Instant channel open reaction',
    'products.mclBot.features.1': 'Check every 0.1-0.2 seconds',
    'products.mclBot.features.2': 'Multi-threading (multiple servers)',
    'products.mclBot.features.3': 'Intelligent anticipation',
    'products.mclBot.features.4': 'Message template configuration',
    'products.mclBot.features.5': 'Real-time console logs',
    'features.title': 'Our Advantages',
    'features.description': 'Why clients choose ave production',
    'features.support.title': 'Support',
    'features.support.description': 'Prompt assistance and consultations on all matters',
    'features.flexible.title': 'Flexible Subscriptions',
    'features.flexible.description': 'Choose from one month to one year with great discounts',
    'features.security.title': 'Security',
    'features.security.description': 'Data protection and stable operation without failures',
    'howItWorks.title': 'How to Get Started',
    'howItWorks.description': 'Three simple steps to a working bot',
    'howItWorks.step1.title': 'Join Discord',
    'howItWorks.step1.description': 'Join our server and get access to the catalog',
    'howItWorks.step2.title': 'Create a ticket in #buy-script',
    'howItWorks.step2.description': 'Specify the desired script and automatically enter a private dialogue with support',
    'howItWorks.step3.title': 'Get your bot and guarantee',
    'howItWorks.step3.description': 'We provide instructions, connect the bot, check logs and give a performance guarantee',
    'contact.title': 'Get Access',
    'contact.subtitle': 'Join our community and start using bots right now',
    'contact.joinDiscord': 'Join Discord',
    'contact.writeTelegram': 'Write to Telegram',
    'contact.workHours': 'Mon-Sun, no days off',
    'contact.nightReleases': 'Night releases — on request',
    'contact.discord.description': 'Main communication and support channel',
    'contact.telegram.description': 'Private messages and consultations',
    'faq.title': 'Frequently Asked Questions',
    'faq.description': 'Answers to popular questions about our products',
    'faq.q1.question': 'How quickly is the bot connected after payment?',
    'faq.q1.answer': 'Bot connection takes 5 to 30 minutes after payment confirmation. We configure the bot for your server, check its functionality, and provide complete usage instructions.',
    'faq.q2.question': 'What should I do if the bot stops working?',
    'faq.q2.answer': 'Create a ticket in Discord or write to Telegram. We will quickly diagnose the problem and restore the bot. Downtime is compensated with additional subscription days.',
    'faq.q3.question': 'Can I transfer the bot to another server?',
    'faq.q3.answer': 'Yes, transferring the bot to another Discord server is possible within an active subscription. Contact support and we will perform the migration without losing data or settings.',
    'faq.q4.question': 'What payment methods do you accept?',
    'faq.q4.answer': 'We accept cryptocurrency (BTC, ETH, USDT), bank cards through secure payment systems. Payment details are discussed in a private ticket.',
    'faq.q5.question': 'Is there a trial period?',
    'faq.q5.answer': 'We do not provide a trial period, but we offer a full money-back guarantee within 24 hours if the bot does not meet the stated functionality.',
    'faq.q6.question': 'Are bots updated automatically?',
    'faq.q6.answer': 'Yes, all updates and fixes are applied automatically without your involvement. You always use the latest version of the bot with the newest features.',
    'footer.description': 'Professional Discord bots and scripts for Majestic RP',
    'footer.rights': 'All rights reserved.',
    'modal.whatsIncluded': "What's Included",
    'modal.howToGet': 'HOW TO GET THE SCRIPT',
    'modal.step1.title': 'Join Discord',
    'modal.step1.description': 'Join our server and get access to the script catalog',
    'modal.step2.title': 'Create a ticket in #buy-script',
    'modal.step2.description': 'Specify the desired script and automatically enter a private dialogue with support',
    'modal.step3.title': 'Get your bot and guarantee',
    'modal.step3.description': 'We provide instructions, connect the bot, check logs and give a performance guarantee',
    'modal.additionalContact': 'ADDITIONAL CONTACT',
    'modal.close': 'Close'
  }
};

/* ========================================
   Product Data
   ======================================== */
var products = {
  family: {
    name: 'Family Bot',
    basePrice: 30,
    features: {
      ru: ['Отчеты за MCL, капты и мероприятия', 'Модуль Академии и повышений', 'Голосовая активность с защитой от абуза', 'Магазин семьи с наградами', 'Полное логирование действий', 'Персональная настройка под ключ'],
      en: ['MCL, capture and event reports', 'Academy and promotion module', 'Voice activity with anti-abuse protection', 'Family shop with rewards', 'Complete action logging', 'Turnkey personal setup']
    }
  },
  alliance: {
    name: 'Alliance Security Bot',
    basePrice: 20,
    features: {
      ru: ['Мгновенная проверка при входе', 'Мониторинг смены ролей в реальном времени', 'Whitelist для соло-игроков', 'Индивидуальные допуски для семей', 'Защита от ложных срабатываний', 'Полная автоматизация модерации'],
      en: ['Instant verification on join', 'Real-time role change monitoring', 'Whitelist for solo players', 'Individual family permissions', 'False positive protection', 'Full moderation automation']
    }
  },
  mcl: {
    name: 'MCL AutoReg Bot',
    basePrice: 20,
    features: {
      ru: ['Мгновенная реакция на открытие канала', 'Проверка каждые 0.1-0.2 секунды', 'Многопоточность (несколько серверов)', 'Интеллектуальное упреждение', 'Настройка шаблона сообщения', 'Консольные логи в реальном времени'],
      en: ['Instant channel open reaction', 'Check every 0.1-0.2 seconds', 'Multi-threading (multiple servers)', 'Intelligent anticipation', 'Message template configuration', 'Real-time console logs']
    }
  }
};

/* ========================================
   Global State
   ======================================== */
var currentLang = 'ru';
var currentMonths = 1;

// Try to get saved language
try {
  var savedLang = localStorage.getItem('lang');
  if (savedLang === 'ru' || savedLang === 'en') {
    currentLang = savedLang;
  }
} catch (e) {
  // localStorage not available
}

/* ========================================
   DOM Ready
   ======================================== */
document.addEventListener('DOMContentLoaded', function() {
  init();
});

/* ========================================
   Initialize
   ======================================== */
function init() {
  setupEventListeners();
  updateLanguage();
  updatePrices();
  // setupScrollReveal();
  // setupStatCounters();
}

/* ========================================
   Event Listeners
   ======================================== */
function setupEventListeners() {
  var header = document.getElementById('header');
  var mobileMenuBtn = document.getElementById('mobileMenuBtn');
  var mobileMenu = document.getElementById('mobileMenu');
  var langToggle = document.getElementById('langToggle');
  var modalOverlay = document.getElementById('modalOverlay');
  var modalClose = document.getElementById('modalClose');
  var modalCloseBtn = document.getElementById('modalCloseBtn');

  // Header scroll effect
  window.addEventListener('scroll', function() {
    if (window.scrollY > 50) {
      header.classList.add('scrolled');
    } else {
      header.classList.remove('scrolled');
    }
  });

  // Mobile menu toggle
  if (mobileMenuBtn && mobileMenu) {
    mobileMenuBtn.addEventListener('click', function() {
      mobileMenu.classList.toggle('open');
    });

    // Close mobile menu on link click
    var mobileLinks = document.querySelectorAll('.mobile-nav-link');
    for (var i = 0; i < mobileLinks.length; i++) {
      mobileLinks[i].addEventListener('click', function() {
        mobileMenu.classList.remove('open');
      });
    }
  }

  // Language toggle
  if (langToggle) {
    langToggle.addEventListener('click', function() {
      currentLang = currentLang === 'ru' ? 'en' : 'ru';
      try {
        localStorage.setItem('lang', currentLang);
      } catch (e) {
        // localStorage not available
      }
      updateLanguage();
      updatePrices();
    });
  }

  // Subscription buttons
  var subBtns = document.querySelectorAll('.sub-btn');
  for (var j = 0; j < subBtns.length; j++) {
    subBtns[j].addEventListener('click', function() {
      for (var k = 0; k < subBtns.length; k++) {
        subBtns[k].classList.remove('active');
      }
      this.classList.add('active');
      currentMonths = parseInt(this.getAttribute('data-months'), 10);
      updatePrices();
    });
  }

  // Modal open buttons
  var modalBtns = document.querySelectorAll('[data-modal]');
  for (var m = 0; m < modalBtns.length; m++) {
    modalBtns[m].addEventListener('click', function() {
      var productKey = this.getAttribute('data-modal');
      openModal(productKey);
    });
  }

  // Modal close
  if (modalClose) {
    modalClose.addEventListener('click', closeModal);
  }
  if (modalCloseBtn) {
    modalCloseBtn.addEventListener('click', closeModal);
  }
  if (modalOverlay) {
    modalOverlay.addEventListener('click', function(e) {
      if (e.target === modalOverlay) {
        closeModal();
      }
    });
  }

  // Close modal on Escape key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      var overlay = document.getElementById('modalOverlay');
      if (overlay && overlay.classList.contains('open')) {
        closeModal();
      }
    }
  });

  // Smooth scroll for anchor links
  setupSmoothScroll();
}

/* ========================================
   Smooth Scroll
   ======================================== */
function setupSmoothScroll() {
  var links = document.querySelectorAll('a[href^="#"]');
  for (var i = 0; i < links.length; i++) {
    links[i].addEventListener('click', function(e) {
      var href = this.getAttribute('href');
      if (href === '#') return;
      
      var target = document.querySelector(href);
      if (target) {
        e.preventDefault();
        var header = document.getElementById('header');
        var headerHeight = header ? header.offsetHeight : 72;
        var targetTop = target.getBoundingClientRect().top + window.pageYOffset - headerHeight;
        
        window.scrollTo({
          top: targetTop,
          behavior: 'smooth'
        });
        
        // Close mobile menu if open
        var mobileMenu = document.getElementById('mobileMenu');
        if (mobileMenu) {
          mobileMenu.classList.remove('open');
        }
      }
    });
  }
}

/* ========================================
   Language Functions
   ======================================== */
function updateLanguage() {
  var langText = document.getElementById('langText');
  if (langText) {
    langText.textContent = currentLang === 'ru' ? 'EN' : 'RU';
  }
  document.documentElement.lang = currentLang;

  var elements = document.querySelectorAll('[data-i18n]');
  for (var i = 0; i < elements.length; i++) {
    var el = elements[i];
    var key = el.getAttribute('data-i18n');
    if (translations[currentLang] && translations[currentLang][key]) {
      el.textContent = translations[currentLang][key];
    }
  }
}

/* ========================================
   Pricing Functions - TOTAL PRICE for period
   ======================================== */
function calculateTotalPrice(basePrice, months) {
  var discounts = {
    1: 0,
    3: 0.22,
    6: 0.35,
    12: 0.48
  };
  
  var discount = discounts[months] || 0;
  var monthlyPrice = basePrice * (1 - discount);
  var totalPrice = monthlyPrice * months;
  
  return Math.round(totalPrice);
}

function updatePrices() {
  var priceValues = document.querySelectorAll('.price-value');
  var pricePeriods = document.querySelectorAll('.price-period');

  for (var i = 0; i < priceValues.length; i++) {
    var el = priceValues[i];
    var basePrice = parseInt(el.getAttribute('data-base'), 10);
    var totalPrice = calculateTotalPrice(basePrice, currentMonths);
    el.textContent = '$' + totalPrice;
  }

  // Update period text - show full period description
  var periodTexts = {
    ru: {
      1: ' / месяц',
      3: ' / 3 месяца',
      6: ' / 6 месяцев',
      12: ' / год'
    },
    en: {
      1: ' / month',
      3: ' / 3 months',
      6: ' / 6 months',
      12: ' / year'
    }
  };

  var periodText = periodTexts[currentLang][currentMonths] || '';

  for (var j = 0; j < pricePeriods.length; j++) {
    pricePeriods[j].textContent = periodText;
  }
}

/* ========================================
   Modal Functions
   ======================================== */
function openModal(productKey) {
  var product = products[productKey];
  if (!product) return;

  var modalOverlay = document.getElementById('modalOverlay');
  var modalTitle = document.getElementById('modalTitle');
  var modalSubtitle = document.getElementById('modalSubtitle');
  var modalFeatures = document.getElementById('modalFeatures');
  var productModal = document.getElementById('productModal');

  if (modalTitle) {
    modalTitle.textContent = product.name;
  }
  
  // Update subtitle based on current subscription
  var subtitleTexts = {
    ru: {
      1: 'Подписка на 1 месяц',
      3: 'Подписка на 3 месяца',
      6: 'Подписка на 6 месяцев',
      12: 'Годовая подписка'
    },
    en: {
      1: '1 Month Subscription',
      3: '3 Month Subscription',
      6: '6 Month Subscription',
      12: 'Annual Subscription'
    }
  };
  
  if (modalSubtitle) {
    modalSubtitle.textContent = subtitleTexts[currentLang][currentMonths];
  }

  // Update features
  if (modalFeatures) {
    var features = product.features[currentLang];
    modalFeatures.innerHTML = '';
    for (var i = 0; i < features.length; i++) {
      var li = document.createElement('li');
      li.textContent = features[i];
      modalFeatures.appendChild(li);
    }
  }

  // Update modal translations
  if (productModal) {
    var modalI18nElements = productModal.querySelectorAll('[data-i18n]');
    for (var j = 0; j < modalI18nElements.length; j++) {
      var el = modalI18nElements[j];
      var key = el.getAttribute('data-i18n');
      if (translations[currentLang] && translations[currentLang][key]) {
        el.textContent = translations[currentLang][key];
      }
    }
  }

  if (modalOverlay) {
    modalOverlay.classList.add('open');
    document.body.style.overflow = 'hidden';
  }
}

function closeModal() {
  var modalOverlay = document.getElementById('modalOverlay');
  if (modalOverlay && modalOverlay.classList.contains('open')) {
    modalOverlay.classList.add('closing');
    modalOverlay.classList.remove('open');
    
    // Wait for animation to complete before hiding
    setTimeout(function() {
      modalOverlay.classList.remove('closing');
      document.body.style.overflow = '';
    }, 300);
  }
}

/* ========================================
   Scroll Reveal Animation
   ======================================== */
function setupScrollReveal() {
  // Add reveal class to elements
  var revealElements = document.querySelectorAll(
    '.section-header, .product-card, .feature-card, .step-card, .contact-card, .work-hours'
  );
  
  for (var i = 0; i < revealElements.length; i++) {
    revealElements[i].classList.add('reveal');
  }
  
  // Check if IntersectionObserver is supported
  if ('IntersectionObserver' in window) {
    var observer = new IntersectionObserver(function(entries) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });
    
    var elements = document.querySelectorAll('.reveal');
    elements.forEach(function(el) {
      observer.observe(el);
    });
  } else {
    // Fallback for older browsers
    var elements = document.querySelectorAll('.reveal');
    for (var j = 0; j < elements.length; j++) {
      elements[j].classList.add('visible');
    }
  }
}

/* ========================================
   Stat Counter Animation
   ======================================== */
function setupStatCounters() {
  var statValues = document.querySelectorAll('.stat-value');
  
  if ('IntersectionObserver' in window) {
    var observer = new IntersectionObserver(function(entries) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          animateCounter(entry.target);
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.5
    });
    
    statValues.forEach(function(el) {
      observer.observe(el);
    });
  }
}

function animateCounter(element) {
  var finalValue = parseInt(element.textContent, 10);
  var duration = 1500;
  var startTime = null;
  
  function animate(currentTime) {
    if (!startTime) startTime = currentTime;
    var progress = Math.min((currentTime - startTime) / duration, 1);
    
    // Ease out cubic
    var easeProgress = 1 - Math.pow(1 - progress, 3);
    var currentValue = Math.floor(easeProgress * finalValue);
    
    element.textContent = currentValue;
    
    if (progress < 1) {
      requestAnimationFrame(animate);
    } else {
      element.textContent = finalValue;
    }
  }
  
  requestAnimationFrame(animate);
}
